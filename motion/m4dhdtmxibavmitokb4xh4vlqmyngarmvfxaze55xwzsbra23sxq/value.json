{"opened_at":"2024-02-23T21:20:55.235430571Z","closed_at":"2025-09-18T14:45:13.96088657Z","id":"27","type":"concern","policy":"pmp-concern-policy","author":"ctessum","tracker_url":"https://github.com/EarthSciML/EarthSciData.jl/issues/27","title":"Connect GEOS-FP to everything else","description":"Right now there are a lot of things that are parameters, for example temperature [here](https://github.com/EarthSciML/GasChem.jl/blob/8a1741a7896e2a06a76d39f1a9da97f0219344a3/src/SuperFast.jl#L65).\r\nWe need to add connectors to GEOS-FP for pretty much all of these things, so for example if we do GEOSFP(t) + SuperFast(t) that superfast will get its temperature information from GEOS-FP rather than using the default.\r\n\r\nSo for the temperature example, [this site](https://wiki.seas.harvard.edu/geos-chem/index.php/List_of_GEOS-FP_met_fields) says that temperature in GEOS-Chem is the `T` variable in the `I3` file. So we could do something like\r\n\r\n``` julia\r\ng = GEOSFP(t)\r\n\r\n\r\nfunction Base.:(+)(s::SuperFast, g::EarthSciData.GEOSFP)::ComposedEarthSciMLSystem\r\n    sys = param_to_var(s.sys, :T)\r\n    s = SuperFast(sys, s.rxn_sys)\r\n    ComposedEarthSciMLSystem(\r\n        ConnectorSystem([\r\n            s.sys.T ~ g.sys.I3â‚ŠT\r\n        ], s, g),\r\n        s, g,\r\n    )\r\nend\r\nBase.:(+)(f::EarthSciData.GEOSFP, s::SuperFast)::ComposedEarthSciMLSystem = s + g\r\n```\r\n\r\nThis code should go in an extension as described here: https://github.com/EarthSciML/AtmosphericDeposition.jl/issues/22. In general to avoid having a huge number of extensions in the EarthSciData package, we can put all the extensions in the other packages, e.g. GasChem.jl in this example case.\r\n\r\nPretty much anything that is currently a parameter with a default value should have a connector to get that information from GEOS-FP.\r\n\r\nAlso add tests.","labels":["gov4git:managed"],"frozen":false,"closed":true,"cancelled":true,"archived":true,"score":{"attention":8},"ref_by":null,"ref_to":null}
